config:
    registry: docker.io

tests:
    velocity:
        exclude_directories:
            - tests
        language: golang
        framework: std

    end-to-end:
        directory: tests/end-to-end
        run: echo "TBA"

    golang:
        directory: tests/golang
        language: golang
        framework: std

    javascript-jest:
        directory: tests/javascript-jest
        language: javascript
        framework: jest

    python-pytest:
        directory: tests/python-pytest
        language: python
        framework: pytest

images:
    ubuntu:
        image: ubuntu:mantic
    alpine:
        image: alpine:latest

builds:
    golang-app:
        image: golang:1.21.4
        directory: .
        build: go build -o /tmp/app .
        output: /tmp/app

workflows:
    all-tests:
        tests:
            ubuntu:
                - velocity
                - end-to-end
                - golang
                - javascript-jest
                - python-pytest
            alpine:
                - end-to-end

    velocity:
        tests:
            ubuntu:
                - velocity

    end-to-end:
        tests:
            ubuntu:
                - end-to-end

    languages:
        tests:
            ubuntu:
                - golang
                - javascript-jest
                - python-pytest
