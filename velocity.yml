config:
    registry: docker.io/library
    server: https://velocity-ci.com/api

tests:
    velocity:
        exclude_directories:
            - tests
        language: golang
        framework: std

    end-to-end:
        directory: tests/end-to-end
        run: echo "TBA"

    local-test:
        run: cat velocity.yml

    golang-test:
        directory: testdata/golang
        language: golang
        framework: std

    golang:
        directory: .
        language: golang
        framework: std

    javascript-jest:
        directory: tests/javascript-jest
        language: javascript
        framework: jest

    python-pytest:
        directory: tests/python-pytest
        language: python
        framework: pytest

images:
    ubuntu:
        image: ubuntu:mantic
    alpine:
        image: alpine:latest
    golang:
        image: golang:latest
    golang-1-16-15:
        image: golang:1.16.15

builds:
    golang-app:
        image: golang:1.21.4
        directory: .
        build: go build -o /tmp/app .
        output: /tmp/app

workflows:
    all-tests:
        tests:
            ubuntu:
                - velocity
                - end-to-end
                - golang
                - javascript-jest
                - python-pytest
            alpine:
                - end-to-end

    velocity:
        tests:
            ubuntu:
                - velocity

    end-to-end:
        tests:
            ubuntu:
                - end-to-end

    local-test:
        tests:
            ubuntu:
                - local-test

    golang:
        tests:
            golang:
                - golang
            golang-1-16-15:
                - golang

    golang-test:
        tests:
            golang:
                - golang-test
