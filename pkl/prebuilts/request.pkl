import "../primitives/command.pkl"

typealias Method = "get"|"post"|"put"|"delete"

class Response {
    body: String?
    code: Int
}

class Request {
    method: Method
    url: String

    body: String?
    timeout: Int?
    headers: Mapping<String, String>?
}

// Makes a request to 
function create(request: Request, response: Response) = new command.PrebuiltCommand {
    prebuilt = "request.\(request.method)"
    params {
        ["body"] = request.body
        ["headers"] = request.headers
        ["url"] = request.url
        ["timeout"] = request.timeout
        ["response"] = response
    }
}
