import "../primitives/command.pkl"

typealias Method = "get"|"post"|"put"|"delete"

class Request {
    /// The HTTP method to use
    method: Method
    /// The URL to send the request to
    url: String
    body: String
    timeout: Int = 60000
    headers: Mapping<String, String>
}

function create(request: Request) = new command.PrebuiltCommand {
    prebuilt = "request.\(request.method)"
    params {
        ["body"] = request.body
        ["headers"] = request.headers
        ["url"] = request.url
        ["timeout"] = request.timeout
    }
}
